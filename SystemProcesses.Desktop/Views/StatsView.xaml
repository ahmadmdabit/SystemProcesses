<Window
    x:Class="SystemProcesses.Desktop.Views.StatsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:SystemProcesses.Desktop.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:SystemProcesses.Desktop.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="clr-namespace:SystemProcesses.Desktop.ViewModels"
    Title="System Stats"
    Width="Auto"
    Height="46"
    AllowsTransparency="False"
    Background="Transparent"
    KeyUp="WindowKeyUp"
    ResizeMode="NoResize"
    ShowInTaskbar="False"
    SizeToContent="Width"
    Topmost="True"
    WindowStyle="None"
    mc:Ignorable="d">

    <Window.DataContext>
        <viewmodels:StatsViewModel />
    </Window.DataContext>

    <Window.Resources>
        <!--  Styles  -->
        <Style x:Key="GreenTextBlock" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#00EE00" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="FontFamily" Value="Consolas" />
            <Setter Property="FontSize" Value="12" />
        </Style>
        <Style
            x:Key="GreenTextBlock2"
            BasedOn="{StaticResource GreenTextBlock}"
            TargetType="TextBlock">
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="FontSize" Value="11" />
        </Style>

        <Style x:Key="IconBorder" TargetType="Border">
            <Setter Property="Background" Value="#333333" />
            <Setter Property="BorderBrush" Value="#444444" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="5" />
            <Setter Property="Padding" Value="5,3" />
            <Setter Property="Margin" Value="0,0,3,0" />
            <Setter Property="SnapsToDevicePixels" Value="True" />
        </Style>
    </Window.Resources>

    <Window.ContextMenu>
        <ContextMenu
            Placement="Relative"
            PlacementRectangle="0,0,0,0"
            PlacementTarget="{Binding ElementName=RootBorder}"
            Style="{StaticResource ContextMenuStyle}"
            VerticalOffset="-8">
            <MenuItem
                Command="{Binding ShowApplicationCommand}"
                Header="Show"
                Style="{StaticResource MenuItemStyle}" />
            <MenuItem
                Command="{Binding ExitApplicationCommand}"
                Header="Exit"
                Style="{StaticResource MenuItemStyle}" />
        </ContextMenu>
    </Window.ContextMenu>

    <Border
        x:Name="RootBorder"
        Height="46"
        Padding="5,5,2,5"
        Background="#212121"
        BorderBrush="#222222"
        BorderThickness="1"
        CornerRadius="5"
        MouseDown="BorderMouseDown"
        SnapsToDevicePixels="True">
        <StackPanel Orientation="Horizontal">
            <!--  CPU  -->
            <Border Style="{StaticResource IconBorder}">
                <StackPanel Orientation="Vertical">
                    <TextBlock Style="{StaticResource GreenTextBlock2}" Text="CPU" />
                    <TextBlock Style="{StaticResource GreenTextBlock}" Text="{Binding TotalCpuUsage, Converter={StaticResource CpuPercentageConverter}, FallbackValue=0%}" />
                </StackPanel>
            </Border>

            <!--  RAM  -->
            <Border Style="{StaticResource IconBorder}">
                <StackPanel Orientation="Vertical">
                    <TextBlock Style="{StaticResource GreenTextBlock2}" Text="RAM" />
                    <TextBlock Style="{StaticResource GreenTextBlock}" Text="{Binding RamPercent, Converter={StaticResource CpuPercentageConverter}, FallbackValue=0%}" />
                </StackPanel>
            </Border>

            <!--  Virtual Memory  -->
            <Border Style="{StaticResource IconBorder}">
                <StackPanel Orientation="Vertical">
                    <TextBlock Style="{StaticResource GreenTextBlock2}" Text="VM" />
                    <TextBlock Style="{StaticResource GreenTextBlock}" Text="{Binding VMPercent, Converter={StaticResource CpuPercentageConverter}, FallbackValue=0%}" />
                </StackPanel>
            </Border>

            <!--  Disk Activity  -->
            <Border Style="{StaticResource IconBorder}">
                <StackPanel Orientation="Vertical">
                    <TextBlock Style="{StaticResource GreenTextBlock2}" Text="Disk" />
                    <TextBlock Style="{StaticResource GreenTextBlock}" Text="{Binding DiskActivePercent, Converter={StaticResource CpuPercentageConverter}, FallbackValue=0%}" />
                </StackPanel>
            </Border>

            <!--  Dynamic Drive List  -->
            <ItemsControl ItemsSource="{Binding Drives}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource IconBorder}">
                            <StackPanel Orientation="Vertical">
                                <TextBlock Style="{StaticResource GreenTextBlock2}" Text="{Binding DriveLabel}" />
                                <TextBlock Style="{StaticResource GreenTextBlock}" Text="{Binding FreeBytes, Converter={StaticResource BytesToAutoFormatConverter}}" />
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </Border>
</Window>
